{% extends 'base.html' %}

{% block content %}
<h1>Your Shopping Cart</h1>

{% if items %}
    <div class="cart-items">
        {% for item in items %}
        <div class="cart-item" style="display: flex; align-items: center; border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 5px; gap: 20px;">
            <div class="item-image">
                <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" width="100" style="border-radius: 5px;">
            </div>
            <div class="item-details" style="flex: 1;">
                <h3>{{ item.product.name }}</h3>
                <p class="price">₹{{ item.product.price }}</p>
            </div>
            <div class="item-quantity" style="display: flex; align-items: center; gap: 10px;">
                <form action="{% url 'update_cart' item.id 'remove' %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="qty-btn" style="background: #6d4c41; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">-</button>
                </form>
                <span class="quantity" style="font-weight: bold; min-width: 30px; text-align: center;">{{ item.quantity }}</span>
                <form action="{% url 'update_cart' item.id 'add' %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="qty-btn" style="background: #6d4c41; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">+</button>
                </form>
            </div>
            <div class="item-total" style="font-weight: bold; min-width: 80px; text-align: right;">
                <p>₹{{ item.get_total }}</p>
            </div>
            <div class="item-remove">
                <form action="{% url 'remove_from_cart' item.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="remove-btn" style="background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Remove</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="cart-summary" style="margin-top: 30px; padding: 20px; background: #f5f5f5; border-radius: 5px; text-align: right;">
        <h3>Cart Total: ₹{{ order.get_cart_total }}</h3>
        <a href="{% url 'checkout' %}" class="checkout-btn" style="background: #4CAF50; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block; margin-top: 10px;">Proceed to Checkout</a>
    </div>
{% else %}
    <p>Your cart is empty. <a href="{% url 'home' %}">Continue shopping</a></p>
{% endif %}
{% endblock %}